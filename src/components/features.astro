---
import ContentSection from "~/components/content-section.astro";
---

<ContentSection title="Mines Bot" id="features">
  <Fragment slot="lead">
    O <span class="text-primary">MELHOR</span> e mais assertivo Bot
    <br>
      <br>
      AtÃ© 3 tentativas ğŸ’£ğŸ’£ğŸ’£
    <br>
  </Fragment>
  <div class="mines-wrapper">
    { Array(25).fill('hello').map((_, idx) => {
      return (<div id={idx + 1} class="interrogation"></div>)
    }) }
  </div>
    <div class="flex gap-10">
        <button id="generate-button" class="generate-button">Gerar</button>
        <a href="https://55myy.com/?id=21350632" target="_blank">
            <button id="subscribe-button" class="generate-button">Cadastre-se</button>
        </a>
    </div>
    <Fragment>
        <span class="text-red-400">O hack sÃ³ funciona para o site recomendado*</span>
    </Fragment>
</ContentSection>

<script>
  import { generate } from '../utils';

  let canGenerate = true;

  const generateButton = document.getElementById('generate-button');

  const getDiamonds = () => document.querySelectorAll('.diamond');

  const restartBoard = () => {
     getDiamonds().forEach((el: HTMLDivElement) => el.classList.remove('diamond'));
  }

  function generateDiamonds() {
    restartBoard();

    generate()
      .forEach((num) => document.getElementById(num).classList.add('diamond'));

    generateButton.classList.add('disabled')

    setTimeout(() => generateButton.classList.remove('disabled'), 3000);
  }

  generateButton.addEventListener('click', generateDiamonds);
</script>

